@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

LAYOUT_WITH_LEGEND()

Person(user, "User", "Accesses the system")

System_Boundary(k8s, "Kubernetes Cluster") {

    Container(frontendPod, "Shopping Frontend Pod", "Nginx", "Handles UI requests")
    Container(backendPod, "Shopping Backend Pod", "Redis", "Handles API/data requests")

    ContainerDb(db, "Database Pod", "Postgres", "Stores application data")

    Container(frontendSvc, "Frontend Service", "K8s Service", "Exposes frontend pods")
    Container(backendSvc, "Backend Service", "K8s Service", "Exposes backend pods")

    Rel(user, frontendSvc, "HTTP requests")
    Rel(frontendSvc, frontendPod, "Routes traffic via label selectors")
    Rel(backendSvc, backendPod, "Routes traffic via label selectors")
    Rel(frontendPod, backendSvc, "API calls")
    Rel(backendPod, db, "Reads/Writes")
}
@enduml